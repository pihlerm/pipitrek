<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equatorial Telescope Mount Animation</title>
    <style>
        body { margin: 0; }
        #telescopeContainer {
            width: 100vw;
            height: 80vh;
            border: 1px solid black;
        }
        #controls {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
        }
        label { margin-right: 10px; }
        input[type="text"] { width: 100px; }
    </style>
</head>
<body>
    <div id="controls">
        <label>RA (deg): <input type="range" id="raSlider" min="0" max="360" value="0"></label><br>
        <label>Dec (deg): <input type="range" id="decSlider" min="-180" max="180" value="0"></label><br>
        <label>Object RA (HH:MM:SS): <input type="text" id="raInput" value="13:45:22"></label><br>
        <label>Object Dec (DD*MM:SS): <input type="text" id="decInput" value="-12*23:34"></label><br>
        <label>Longitude (deg): <input type="text" id="longitudeInput" value="14.5058"></label><br>
        <label>Lattitude (deg): <input type="text" id="lattitudeInput" value="46.0569"></label><br>
        <button id="pointTelescope">Point Telescope</button><br>
        <button id="meridianFlip">Meridian Flip</button>
    </div>
    <div id="telescopeContainer">
        <canvas id="telescopeCanvas"></canvas>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://unpkg.com/three@0.134.0/examples/js/controls/OrbitControls.js"></script>
    <script src="telescope_sim.js"></script>
    <script>
        // Initialize telescope simulation
        const canvas = document.getElementById('telescopeCanvas');
        const latitude = parseFloat(document.getElementById('lattitudeInput').value);
        const longitude = parseFloat(document.getElementById('longitudeInput').value);

        const telescopeSim = new TelescopeSim(canvas, latitude);

        // Controls
        const raSlider = document.getElementById('raSlider');
        const decSlider = document.getElementById('decSlider');
        const meridianFlipButton = document.getElementById('meridianFlip');
        const pointTelescopeButton = document.getElementById('pointTelescope');
        const raInput = document.getElementById('raInput');
        const decInput = document.getElementById('decInput');

        raSlider.addEventListener('input', () => {
            const ra = parseFloat(raSlider.value);
            const dec = parseFloat(decSlider.value);
            telescopeSim.setAngles(ra, dec);
        });

        decSlider.addEventListener('input', () => {
            const ra = parseFloat(raSlider.value);
            const dec = parseFloat(decSlider.value);
            telescopeSim.setAngles(ra, dec);
        });

        meridianFlipButton.addEventListener('click', () => {
            telescopeSim.meridianFlip();
            raSlider.value = telescopeSim.raAngle;
            decSlider.value = telescopeSim.decAngle;
        });

        pointTelescopeButton.addEventListener('click', () => {
            const raStr = raInput.value;
            const decStr = decInput.value;
            telescopeSim.pointTelescope(raStr, decStr);
            raSlider.value = telescopeSim.raAngle;
            decSlider.value = telescopeSim.decAngle;
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            const container = document.getElementById('telescopeContainer');
            telescopeSim.resize(container.clientWidth, container.clientHeight);
        });

        // Initial resize
        const container = document.getElementById('telescopeContainer');
        telescopeSim.resize(container.clientWidth, container.clientHeight);
    </script>
</body>
</html>